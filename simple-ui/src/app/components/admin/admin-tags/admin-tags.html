<div class="tags-container">
    <div class="tags-header">
        <div>
            <h1>Manage Tags</h1>
            <p class="subtitle">Create and organize tags for your blog posts</p>
        </div>
        @if (!isAdding) {
            <button class="btn-primary" (click)="startAdd()">+ New Tag</button>
        }
    </div>

    @if (isLoading) {
        <div class="loading">Loading tags...</div>
    }

    @if (!isLoading) {
        <!-- Add New Tag Form -->
        @if (isAdding) {
            <div class="tag-card add-form">
                <h2>Create New Tag</h2>
                <div class="form-row">
                    <div class="form-group">
                        <label for="newTagName">Tag Name</label>
                        <input 
                            type="text" 
                            id="newTagName"
                            [(ngModel)]="newTagName" 
                            (ngModelChange)="onNameChange($event, true)"
                            placeholder="e.g., JavaScript"
                            class="form-input"
                        >
                    </div>
                    <div class="form-group">
                        <label for="newTagSlug">Slug (auto-generated)</label>
                        <input 
                            type="text" 
                            id="newTagSlug"
                            [(ngModel)]="newTagSlug" 
                            placeholder="e.g., javascript"
                            class="form-input"
                        >
                    </div>
                </div>
                <div class="form-actions">
                    <button class="btn-cancel" (click)="cancelAdd()">Cancel</button>
                    <button class="btn-save" (click)="createTag()">Create Tag</button>
                </div>
            </div>
        }

        <!-- Tags List -->
        <div class="tags-list">
            @for (tag of tags; track tag.id) {
                <div class="tag-card">
                    @if (!isEditing(tag.id)) {
                        <div class="tag-display">
                            <div class="tag-info">
                                <h3>{{ tag.name }}</h3>
                                <span class="tag-slug">/{{ tag.slug }}</span>
                            </div>
                            <div class="tag-actions">
                                <button class="btn-edit" (click)="startEdit(tag)">Edit</button>
                                <button class="btn-delete" (click)="deleteTag(tag.id, tag.name)">Delete</button>
                            </div>
                        </div>
                    }

                    @if (isEditing(tag.id)) {
                        <div class="tag-edit">
                            <div class="form-row">
                                <div class="form-group">
                                    <label>Tag Name</label>
                                    <input 
                                        type="text" 
                                        [(ngModel)]="editTagName" 
                                        (ngModelChange)="onNameChange($event, false)"
                                        class="form-input"
                                    >
                                </div>
                                <div class="form-group">
                                    <label>Slug</label>
                                    <input 
                                        type="text" 
                                        [(ngModel)]="editTagSlug" 
                                        class="form-input"
                                    >
                                </div>
                            </div>
                            <div class="form-actions">
                                <button class="btn-cancel" (click)="cancelEdit()">Cancel</button>
                                <button class="btn-save" (click)="saveTag(tag.id)">Save</button>
                            </div>
                        </div>
                    }
                </div>
            }
        </div>

        @if (tags.length === 0) {
            <div class="no-tags">
                <p>No tags yet. Create your first tag!</p>
            </div>
        }
    }
</div>